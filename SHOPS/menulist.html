<link href="https://www.alakrbb.com/dist/common.425698d7a0766f1a48bc.css">
<style>
.font-color-foodmall {  color: #8AA43A !important; }
.margin-top-under-navbar { margin-top: 49px;} 
.bg-master-foodmall { background-color: #8AA43A; }
.items-add-to-cart { right: 18%;  position: absolute; top: 25%; }
.border-bottom-color-primary  { border-bottom :3px solid #8AA43A !important; } /* เขียว */ 
.border-success-foodmall { border-color :#8AA43A !important; }
/* ข้างบนนำขึ้น Server */


.btn-push {
    z-index: 20;
    position: absolute;
    right: 0px;
  /*  bottom: 91.5px;   // -21.5px; */
    padding-bottom: 10px;
   
}

.button-circle {
    position: relative;  /* relative */
}
.wrapper-button-circle {
    top: 5px;
    left: 12px;
    border-radius: 100%;
    position: absolute;
    width: 35px;
    height: 35px; 
    background: red;  /*#00bd29 */
}
    
/*.btn-add-to-cart {     
    border: 4px #fff solid;
    border-radius: 25px;
    background: #fff; 
    font-size: 2.5em;
}*/
/*  #8AA43A  */

</style>
 <!-- Link Swiper's CSS -->


<div class="fixed-top shadow" id='top_shopping_cart'  style="display:none">
    <div class="row box-head-title-foodmall fixed-top shadow" style="background-color: #F6F6F6 !important;">
        <div class="col-3 p-0 pl-1 text-left">
            <button class='btn border border-0 text-secondary' onclick="window.history.back();">
                <i class="fas fa-chevron-left"></i> Back
            </button>
        </div>
        <div class="col-6 p-0 text-center">
            <div class="header-foodmall font-color-foodmall-gray-medium mt-1"> สั่งอาหาร</div>
        </div>
        <div class="col-3 text-right"> 
            <div class="d-block mr-4" onclick="go2View('cart')"> 
                <img src="/image/icons8-shopping-cart-80.png" class="float-right" alt="" style="width: 52%; max-width:45px;"/>
            </div> 
            <div class="items-add-to-cart badge badge-pill badge-danger">##CART-totalitem##</div> 
        </div>
    </div> <!--// menu -->
        
</div> <!-- topmenu -->
 


<!-- Slide banner  -->

<div id="carouselExampleIndicators" class="carousel slide margin-top-under-navbar" data-ride="carousel" >
<!--  <ol class="carousel-indicators">
    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
  </ol> ไม่แสดงให้กดซ้ายขวา แทน -->

  <div class="carousel-inner">
    <div class="carousel-item  active">
      <img src="https://img.freepik.com/free-photo/vegetarian-vietnamese-spring-rolls-with-spicy-shrimps-prawns-carrot-cucumber-red-cabbage-rice-noodle_2829-18322.jpg?size=626&ext=jpg" class="d-block w-100 img-fluid" alt="...">
    </div>
    <div class="carousel-item">
      <img src="https://img.freepik.com/free-photo/vegetarian-vietnamese-spring-rolls-with-spicy-shrimps-prawns-carrot-cucumber-red-cabbage-rice-noodle_2829-18324.jpg?size=626&ext=jpg" class="d-block w-100 img-fluid" alt="...">
    </div>
    <div class="carousel-item">
      <img src="https://img.freepik.com/free-photo/vegetarian-vietnamese-spring-rolls-with-spicy-shrimps-prawns-carrot-cucumber-red-cabbage-rice-noodle_2829-18343.jpg?size=626&ext=jpg" class="d-block w-100 img-fluid" alt="...">
    </div>
  </div>
  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>

<!-- // Slide banner การตลาดกำหนดขนาดมา-->


<div class="container-fluid text-center mx-auto" style="position: absolute; width: 100%; z-index: 16;  top: 36%;">
    <img src="/image/logo-ohkajhu.png" class="img-fluid rounded-circle shadow" alt="" style="width:25%; border: 5px #ffffff solid; background-color: #fff;"/>
</div> <!-- // logo website -->




<!-- Category -->

<div id="carouselExampleIndicators2" class="carousel slide margin-top-under-navbar" data-ride="carousel" >
<!--  <ol class="carousel-indicators">
    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
  </ol> ไม่แสดงให้กดซ้ายขวา แทน -->

  <div class="carousel-inner">
    <div class="carousel-item col-2 col-md-3 col-sm-2 active">
      <img src="https://img.freepik.com/free-photo/vegetarian-vietnamese-spring-rolls-with-spicy-shrimps-prawns-carrot-cucumber-red-cabbage-rice-noodle_2829-18322.jpg?size=626&ext=jpg" class="d-block img-fluid" alt="...">
    </div>
    <div class="carousel-item col-2 col-md-3 col-sm-2">
      <img src="https://img.freepik.com/free-photo/vegetarian-vietnamese-spring-rolls-with-spicy-shrimps-prawns-carrot-cucumber-red-cabbage-rice-noodle_2829-18324.jpg?size=626&ext=jpg" class="d-block img-fluid" alt="...">
    </div>
      <div class="carousel-item col-2 col-md-3 col-sm-2">
      <img src="https://img.freepik.com/free-photo/vegetarian-vietnamese-spring-rolls-with-spicy-shrimps-prawns-carrot-cucumber-red-cabbage-rice-noodle_2829-18324.jpg?size=626&ext=jpg" class="d-block img-fluid" alt="...">
    </div>
      <div class="carousel-item col-2 col-md-3 col-sm-2">
      <img src="https://img.freepik.com/free-photo/vegetarian-vietnamese-spring-rolls-with-spicy-shrimps-prawns-carrot-cucumber-red-cabbage-rice-noodle_2829-18324.jpg?size=626&ext=jpg" class="d-block img-fluid" alt="...">
    </div>
      <div class="carousel-item col-2 col-md-3 col-sm-2">
      <img src="https://img.freepik.com/free-photo/vegetarian-vietnamese-spring-rolls-with-spicy-shrimps-prawns-carrot-cucumber-red-cabbage-rice-noodle_2829-18324.jpg?size=626&ext=jpg" class="d-block img-fluid" alt="...">
    </div>
    <div class="carousel-item col-2 col-md-3 col-sm-2">
      <img src="https://img.freepik.com/free-photo/vegetarian-vietnamese-spring-rolls-with-spicy-shrimps-prawns-carrot-cucumber-red-cabbage-rice-noodle_2829-18343.jpg?size=626&ext=jpg" class="d-block img-fluid" alt="...">
    </div>
  </div>
  <a class="carousel-control-prev" href="#carouselExampleIndicators2" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleIndicators2" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>

<div class="container container-category">
    <div class="category-menu">
        <div class="category-type-food item-right">
            <div class="type-food-menu">
                <div class="swiper-container">
                    <div class="swiper-wrapper" style="transform: translate3d(0px, 0px, 0px);">
                        <div class="swiper-slide swiper-slide-active">
                            <div class="type-food-item active"><div class="img-type"><img src="https://lh3.googleusercontent.com/DVYmkqwKcze5DVGH82-1DUCp4J5ZJETEjkwelayCEJ9sYKVH4IRexYi0YWxqXncYpPkrczk3GiR1zm2LRIScwO-0WH4xeis" class="icon"></div><h2 class="box-label">อาหารจานเดียว</h2></div></div><div class="swiper-slide swiper-slide-next"><div class="type-food-item"><div class="img-type"><img src="https://lh3.googleusercontent.com/RpYuEWMYah6DRX8GtgTJxHPC9eAvDfwPhUDSUQ4jXWhk7owxjCQF9d342elnB-LiuTfyeMLQuQQyXfgZ-0H7rqwWW4LcL6c" class="icon"></div><h2 class="box-label">เครื่องเคียง</h2></div></div></div></div><!----><!----></div></div></div></div>

<div class="container-fluid ">
    <div class="row mt-5 mb-5">
        <div class="col-10 ">
            
            <iframe src="https://swiperjs.com/demos/110-slides-per-view.html"  style="width:100%" frameborder="0" ></iframe>
            <!-- ตัวอย่าง https://swiperjs.com/demos/ --> 
            <!-- Slider for mobile  https://nickpiscitelli.github.io/Glider.js/index.html#demos  -->
            
            <div class="row">
                <div class="col border border-success-foodmall text-center rounded m-1 p-2">                    
                    <span class="font-color-foodmall">ประเภท</span>
                </div>
                <div class="col border border-success-foodmall text-center rounded m-1 p-2">                   
                    <span class="font-color-foodmall">ประเภท</span>
                </div>
                <div class="col border border-success-foodmall text-center rounded m-1 p-2">                    
                    <span class="font-color-foodmall">ประเภท</span>
                </div>
                <div class="col border border-success-foodmall text-center rounded m-1 p-2">                   
                    <span class="font-color-foodmall">ประเภท</span>
                </div>
            </div>
        </div> <!-- category --> 
        
        <div class="col-2 pl-1  text-center">

            <div class="btn  mt-1 p-1" onclick="openSearch()" style="background-color: #f3f3f3;"> 
                <img src="/image/icons8-search.svg" style="width:83%;">
            </div>
        </div>
    </div>
</div> 




<div class="row" id='mainview' style="padding: 10px;">
  Loading..
</div>



<div class="row " id='template_mainview' style="display:none; ">
    <div class="card-deck col-lg-3 col-sm-3 col-md-3 col-6 mb-3" id='main_menu_preview' >
        <div class="card border border-0 shadow-sm rounded-lg border-bottom-color-primary" >
          <img src="https://www.kinarai.com/cdn/image/menu/##menu-mainimage##" class="card-img-top" alt="...">
         
         
          
          <div class="card-body pt-2 pb-1">
              <h6 class="card-title text-center mt-2" style="height:40px;">##menu-name## </h6>
<!--                <p class="card-text font-color-foodmall-gray-light2">รายละเอียด</p>-->
<!--                <p class="card-text">##menu-description##</p>-->
            
            <div class="row p-0">
                <div class="col-8 pl-1">
                    <div class="font-color-foodmall-gray-medium mt-3 font-weight-bold" >
                        ฿ ##menu-mainprice##
                    </div>
                </div>
                 <div class="col-4 text-right">
                     <img src="/image/icons8-plus-green.svg" onclick="addtocart(##menu-id##)" style="width:153%">

                </div>
            </div>  <!-- // -->
            
             
          </div>  <!-- // cardbody -->
          

<!--                <div> Review of Customer </div>
            ...
            <br>-->
        </div>   <!-- // card --> 

    </div> <!-- // card deck --> 
</div> <!-- // row --> 
  



<div class="modal fade " id="modal_priceselect" tabindex="-1" role="dialog"  aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
    <div class="form-group row mt-3 ">
        <div id='menuprice-select' class="pl-3 alert alert-warning" style="width:100%">
             <label for="inputEmail3" class="col-sm-2 col-form-label"> เลือกรายการ </label>
             <div class="col-sm-9">
                 <select class="" id='menu_select'></select>


             </div>
         </div>
    </div>

    <div class="modal-footer">

        <button onclick="updateselectprice()" class="btn btn-sm btn-orange"><i class="fa fa-fw fa-save"></i> OK </button>
        <button onclick="$('#modal_priceselect').modal('hide');" class="btn btn-sm btn-light border border-secondary"><i class="fa fa-fw fa-times"></i> Close </button>
    </div>

    </div>
    </div>
</div>






<script>

  var detail = window.location.search.replace('?liff.state=%2FLINE%2Fmenuview%3F','');
  var working={};
  var template = $('#template_mainview').html();
  var template_cart = $('#top_shopping_cart').html();
  $('#top_shopping_cart').html('').show();
  //$('#main_menu_preview').html('').show();

  function addtocart(menuid){

    var data2send ={
      LINE_USER: LINE_USER,
      menuid:menuid,
      selectedprice:working.selectedprice,
      main:main_web_site,
      action:'add'
      }
    $.postJSON('/engine/order',data2send,(res)=>{
      //  alert("Add to Shopping Cart");
        if(res.result){
          if(res.action =='selectprice'){ // Show Select Price
            working.menuid = menuid;
            $('#modal_priceselect').modal('show');
            working.selectprice = res.detail.prices;
            set_selection(res.detail.prices);
            return;
          }else{
            working.order = res.detail;
            update_shoppingcart();
          }
        }else{
            alert(res.detail);
        }

    });
  }
  function set_selection (allprice){
      var html ='';
      for(var x=0; x < allprice.length;x++){
        html += `<option value="${x}">${allprice[x].detail} ราคา ${allprice[x].price} บาท </option>`;
      }
          $('#menu_select').html(html);
    }


  function runApp() {

      $.postJSON('/engine/order',{LINE_USER: LINE_USER,action:'getdetail'},(res)=>{
          if(res.result){
            working.order = res.detail;



          //alert("Found item" +  res.detail.items.length)

            // $('#shopingcart').html(JSON.stringify(res.detail));
          }else{

          }
          update_shoppingcart();
          //return false;
          $.postJSON('/engine/get/menulist',{LINE_USER: LINE_USER,menuid:undefined},(res)=>{

                if(res && res.detail){

                var menu = res.detail;
                var allhtml ='';
                res.detail.map( (each)=>{
                    each.images ?  each.mainimage = each.images[0] : each.mainimage= 'kinarai.png';
                    each.price ?  each.mainprice = each.price[0].price : each.mainprice = '-';
                });
                allhtml=hash_replace(template,'menu',res.detail);
                // alert(allhtml);
                // return;
                $('#mainview').html(allhtml);
              } else{
                alert(res.detail);
              }
          });
      });


  }
  function update_shoppingcart(){
      if(working.order && working.order.items){
          working.order.totalitem =0;
          working.order.items.map((obj)=>{
              working.order.totalitem +=obj.qty;
          })
      }
      $("#top_shopping_cart").html(hash_replace(template_cart,'CART',working.order))
  }
  initializeLiff();
  function updateselectprice(){
      var index = $('#menu_select').val();

      $('#modal_priceselect').modal('hide');
      working.selectedprice = working.selectprice[index];
    //  alert("INDEX:" + JSON.stringify(working.selectedprice));
      addtocart(working.menuid);
  }

</script>

 